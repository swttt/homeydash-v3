<md-dialog aria-label="Add widget" style="width:50%;">
  <md-toolbar style="background-color:rgb(255, 171, 64);">
    <div class="md-toolbar-tools">
      <h2 style="font-weight:300;text-transform:uppercase;color:white;">Add widget to {{params.pagename}}</h2>
      <span flex></span>
      <md-button class="md-icon-button" ng-click="closeDialog()">
        <md-icon style="color:white;" aria-label="Close dialog">close</md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <md-content style="margin:10px;">
    <div flex="100">


      <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, 'pagename', params.pagename))" hide-indicators="true">



        <wz-step style="text-align:center;" wz-title="Step 1">
          <h3 style="font-weight:300;text-transform:uppercase; ">Select a capability</h3>


          <md-input-container>
            <md-select ng-model="newWidget.capability" placeholder="Select a capability">
              <md-option ng-value="capability" ng-repeat="capability in SETUP.capabilities">{{ capability.description }}</md-option>
            </md-select>
          </md-input-container><br/>
          <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({
              pagename: params.pagename
            })"> Back </md-button> -->
          <!-- <md-button class="md-raised md-warn " ng-click="newWidget = null;" ui-sref="setup.pages.page({
              pagename: params.pagename
            })"> Cancel </md-button> -->
          <md-button ng-disabled="!newWidget.capability" class="md-raised md-primary " wz-next> Next </md-button>



        </wz-step>
        <wz-step style="text-align:center;" wz-title="Step 2">
          <h3 style="font-weight:300;text-transform:uppercase; ">Select a device</h3>



          <md-radio-group style="width:100%" ng-model="newWidget.device">

            <md-radio-button style="width:50%;float:left;text-align:left;" ng-repeat="device in devicelist" ng-value="device" ng-if="device.capabilities[newWidget.capability.capability]" aria-label="{{ device.name }}">

              {{ device.name }} <small style="color:grey;">{{ device.zone.name }}</small>

            </md-radio-button>

          </md-radio-group>
          <br/>
          <div style="width:100%;text-align:center;">
            <md-button class="md-raised md-primary " ng-click="newWidget.device = null;" wz-previous> Back </md-button>
            <!-- <md-button class="md-raised md-warn " ng-click="newWidget = null;" ui-sref="setup.pages.page({
            pagename: params.pagename
          })"> Cancel </md-button> -->
            <md-button ng-disabled="!newWidget.device" class="md-raised md-primary " wz-next> Next </md-button>
          </div>
        </wz-step>

        <wz-step style="text-align:center;" wz-title="Summary">
          <h3 style="font-weight:300;text-transform:uppercase; ">Summary</h3>

          <div style="width:50%;margin:0 auto;text-align:left;background-color:rgb(250,250,250);padding:10px;margin-bottom:15px;" md-whiteframe="3">
            <span>
              <h4 style="font-weight:300;text-transform:uppercase;"> {{params.type}} </h4>
              <b>Device name: </b>{{newWidget.device.name}} <br/>
              <b>Zone name: </b>{{newWidget.device.zone.name}}<br/>
              <b>Capability: </b>{{newWidget.capability.description}}
            </span> <br/><br/>
          </div>

          <md-button class="md-raised md-primary " wz-previous> Back </md-button>
          <!-- <md-button class="md-raised md-warn " ng-click="newWidget = null;" ui-sref="setup.pages.page({
            pagename: params.pagename
          })"> Cancel </md-button> -->
          <md-button class="md-raised md-primary " wz-finish> Save </md-button>
        </wz-step>
      </wizard>
      </center>
    </div>

  </md-content>

</md-dialog>
