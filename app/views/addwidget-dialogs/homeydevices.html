<md-dialog aria-label="Add widget" style="width:50%;">


  <md-content style="margin:10px;background-color:white;">
    <div flex="100">


      <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, 'pagename', params.pagename))" hide-indicators="true">



        <wz-step style="text-align:center;" wz-title="Step 1">
          <h3 style="font-weight:300;text-transform:uppercase; ">Select a capability</h3>


          <md-input-container>
            <md-select ng-model="newWidget.capability" placeholder="Select a capability">
              <md-option ng-value="capability" ng-repeat="capability in SETUP.capabilities">{{ capability.description }}</md-option>
            </md-select>
          </md-input-container><br/>
          <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({
              pagename: params.pagename
            })"> Back </md-button> -->
          <md-button class="md-raised md-warn " ng-click="closeDialog()"> Cancel </md-button>
          <md-button ng-disabled="!newWidget.capability" class="md-raised md-primary " wz-next> Next </md-button>



        </wz-step>
        <wz-step style="text-align:center;" wz-title="Step 2">
          <h3 style="font-weight:300;text-transform:uppercase; ">Select a device</h3>



          <md-radio-group style="width:100%;" ng-model="newWidget.device">

            <md-radio-button style="text-align:left;width:50%;float:left;" ng-repeat="device in devicelist" ng-value="device" ng-if="device.capabilities[newWidget.capability.capability]" aria-label="{{ device.name }}">

              {{ device.name }} <small style="color:grey;">{{ device.zone.name }}</small>

            </md-radio-button>

          </md-radio-group>
          <br/>
          <div style="clear:both;"></div>
          <div style="width:100%;text-align:center;">
            <md-button class="md-raised md-primary " ng-click="newWidget.device = null;" wz-previous> Back </md-button>
            <md-button class="md-raised md-warn " ng-click="closeDialog()"> Cancel </md-button>
            <md-button ng-disabled="!newWidget.device" class="md-raised md-primary " wz-next> Next </md-button>
          </div>
        </wz-step>

        <wz-step style="text-align:center;" wz-title="Step 3">
          <h3 style="font-weight:300;text-transform:uppercase; ">Give your widget a name</h3>

          <md-input-container style="text-align:left;">
            <label>Widget name</label>
            <input name="widgetname" ng-model="newWidget.name">
          </md-input-container>


          <br/>
          <div style="width:100%;text-align:center;">
            <md-button class="md-raised md-primary " ng-click="newWidget.name = null;" wz-previous> Back </md-button>
            <md-button class="md-raised md-warn " ng-click="closeDialog()"> Cancel </md-button>
            <md-button ng-disabled="!newWidget.name" class="md-raised md-primary " wz-next> Next </md-button>
          </div>
        </wz-step>

        <wz-step style="text-align:center;" wz-title="Step 4">
          <h3 style="font-weight:300;text-transform:uppercase; ">Select an icon for your widget</h3>

          <div style="height:60px;width:60px;float:left;margin:10px;cursor:pointer;" ng-click="newWidget.icon = icon" ng-repeat="icon in SETUP.icons">
            <md-icon style="padding:5px;" ng-class="{activeIcon: selectedIcon(icon)}" md-svg-icon="images/icons/{{icon}}"></md-icon>
          </div>

          <!-- <md-radio-group style="width:100%;text-align:left;" ng-model="newWidget.icon">
            <md-radio-button style="width:100px;float:left;" ng-repeat="icon in SETUP.icons" ng-value="icon" aria-label="{{icon}}">
              <md-icon md-svg-icon="images/icons/{{icon}}"></md-icon>
            </md-radio-button>
          </md-radio-group> -->

          <div style="clear:both;"></div>
          <br/>
          <div flex="100" style="text-align:center;float:none;">
            <md-button class="md-raised md-primary " ng-click="newWidget.icon = null;" wz-previous> Back </md-button>
            <md-button class="md-raised md-warn " ng-click="closeDialog()"> Cancel </md-button>
            <md-button ng-disabled="!newWidget.icon" class="md-raised md-primary " wz-next> Next </md-button>
          </div>
        </wz-step>

        <wz-step style="text-align:center;" wz-title="Summary">
          <h3 style="font-weight:300;text-transform:uppercase; ">Summary</h3>

          <div style="width:50%;margin:0 auto;text-align:left;padding:10px;margin-bottom:15px;" md-whiteframe="3">
            <span>
              <h4 style="font-weight:300;text-transform:uppercase;"> {{params.type}} </h4>
              <b>Device name: </b>{{newWidget.device.name}} <br/>
              <b>Widget name: </b>{{newWidget.name}} <br/>
              <b>Zone name: </b>{{newWidget.device.zone.name}}<br/>
              <b>Capability: </b>{{newWidget.capability.description}}
            </span> <br/><br/>
          </div>

          <md-button class="md-raised md-primary " wz-previous> Back </md-button>
          <md-button class="md-raised md-warn " ng-click="closeDialog()"> Cancel </md-button>
          <md-button class="md-raised md-primary " wz-finish> Save </md-button>
        </wz-step>
      </wizard>
      </center>
    </div>

  </md-content>

</md-dialog>
